import n from"@babel/runtime/helpers/extends";import*as e from"@react-pdf/primitives";export*from"@react-pdf/primitives";import r from"@babel/runtime/helpers/asyncToGenerator";import t from"@babel/runtime/regenerator";import o from"fs";import{Buffer as i}from"buffer";import u from"@react-pdf/font";import c from"@react-pdf/render";import a from"@react-pdf/pdfkit";import f from"@react-pdf/layout";import p from"@babel/runtime/helpers/objectWithoutPropertiesLoose";import s from"react-reconciler";import{unstable_scheduleCallback as d,unstable_cancelCallback as l}from"scheduler";var m,v=function n(e,r){var t=Object.keys(e),o=Object.keys(r);if(t.length!==o.length)return!1;for(var i=0;i<t.length;i+=1){var u=t[i];if("render"===u&&!e[u]!=!r[u])return!1;if("children"!==u&&e[u]!==r[u]){if("object"==typeof e[u]&&"object"==typeof r[u]&&n(e[u],r[u]))continue;return!1}if("children"===u&&("string"==typeof e[u]||"string"==typeof r[u]))return e[u]===r[u]}return!0},h=["style","children"],y=["style"],b={},w=function(n,e){var r="TEXT"===n.type;"TEXT_INSTANCE"!==e.type||r?n.children.push(e):console.warn("Invalid '"+e.value+"' string child outside <Text> component")},g=function(n){var e=n.onChange;return s({schedulePassiveEffects:d,cancelPassiveEffects:l,supportsMutation:!0,isPrimaryRenderer:!1,warnsIfNotActing:!1,appendInitialChild:w,createInstance:function(n,e){var r=e.style;return e.children,{type:n,box:{},style:r||{},props:p(e,h)||{},children:[]}},createTextInstance:function(n,e){return{type:"TEXT_INSTANCE",value:n}},finalizeInitialChildren:function(n,e,r){return!1},getPublicInstance:function(n){return n},prepareForCommit:function(){},clearContainer:function(){},prepareUpdate:function(n,e,r,t){return!v(r,t)},resetAfterCommit:void 0===e?function(){}:e,resetTextContent:function(n){},getRootHostContext:function(){return b},getChildHostContext:function(){return b},shouldSetTextContent:function(n,e){return!1},now:Date.now,useSyncScheduling:!0,appendChild:w,appendChildToContainer:function(n,e){"ROOT"===n.type?n.document=e:w(n,e)},insertBefore:function(n,e,r){var t,o=null===(t=n.children)||void 0===t?void 0:t.indexOf(r);void 0!==o&&-1!==o&&e&&n.children.splice(o,0,e)},removeChild:function(n,e){var r,t=null===(r=n.children)||void 0===r?void 0:r.indexOf(e);void 0!==t&&-1!==t&&n.children.splice(t,1)},removeChildFromContainer:function(n,e){var r,t=null===(r=n.children)||void 0===r?void 0:r.indexOf(e);void 0!==t&&-1!==t&&n.children.splice(t,1)},commitTextUpdate:function(n,e,r){n.value=r},commitUpdate:function(n,e,r,t,o){var i=o.style,u=p(o,y);n.props=u,n.style=i}})},x="3.0.2",C=new u,T={},P=function(n){var e={type:"ROOT",document:null},o=(m=m||g({onChange:function(){for(var n,e=(null===(n=T.change)||void 0===n?void 0:n.slice())||[],r=0;r<e.length;r+=1)e[r]()}})).createContainer(e),i=function(n){m.updateContainer(n,o,null)};n&&i(n);var u=function(){var n=r(t.mark((function n(r){var o,i,u,p,s,d,l;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===r&&(r=!0),o=e.document.props||{},i=o.pdfVersion,u=o.language,p=o.pageLayout,s=o.pageMode,d=new a({compress:r,pdfVersion:i,lang:u,displayTitle:!0,autoFirstPage:!1,pageLayout:p,pageMode:s}),n.next=6,f(e.document,C);case 6:return l=n.sent,n.abrupt("return",c(d,l));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p=function(n){void 0===n&&(n={}),e.document.props.onRender&&e.document.props.onRender(n)},s=function(){var n=r(t.mark((function n(){var e,r;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=[],n.next=3,u();case 3:return r=n.sent,n.abrupt("return",new Promise((function(n,t){r.on("data",(function(n){e.push(n instanceof Uint8Array?n:new Uint8Array(n))})),r.on("end",(function(){try{var r=new Blob(e,{type:"application/pdf"});p({blob:r}),n(r)}catch(n){t(n)}}))})));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),d=function(){var n=r(t.mark((function n(){return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p(),n.abrupt("return",u());case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l=function(){var n=r(t.mark((function n(){var e,r;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e="",n.next=3,u(!1);case 3:return r=n.sent,n.abrupt("return",new Promise((function(n,t){try{r.on("data",(function(n){e+=n})),r.on("end",(function(){p(),n(e)}))}catch(n){t(n)}})));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{on:function(n,e){T[n]||(T[n]=[]),T[n].push(e)},container:e,toBlob:s,toBuffer:d,toString:l,removeListener:function(n,e){if(T[n]){var r=T[n].indexOf(e);r>-1&&T[n].splice(r,1)}},updateContainer:i}},S=C,k={create:function(n){return n}},F=function(){var n=r(t.mark((function n(e){var r,o;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=P(e),n.next=3,r.toBuffer();case 3:return o=n.sent,n.abrupt("return",o);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),I=function(){var n=r(t.mark((function n(e,r,i){var u,c;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F(e);case 2:return u=n.sent,c=o.createWriteStream(r),u.pipe(c),n.abrupt("return",new Promise((function(n,e){c.on("finish",(function(){i&&i(u,r),n(u)})),c.on("error",e)})));case 6:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}(),O=function(n){return F(n).then((function(n){return new Promise((function(e,r){var t=[];n.on("data",(function(n){return t.push(n)})),n.on("end",(function(){return e(i.concat(t))})),n.on("error",(function(n){return r(n)}))}))}))},D=function(n){return O(n).then((function(n){return n.toString()}))},E=function(n){throw new Error(n+" is a web specific API. You're either using this component on Node, or your bundler is not loading react-pdf from the appropriate web build.")},A=function(){E("usePDF")},B=function(){E("PDFViewer")},L=function(){E("PDFDownloadLink")},N=function(){E("BlobProvider")},R=I,j=n({pdf:P,Font:S,version:"3.0.2",StyleSheet:k,usePDF:A,PDFViewer:B,BlobProvider:N,PDFDownloadLink:L,renderToStream:F,renderToString:D,renderToFile:I,render:R},e);export{N as BlobProvider,S as Font,L as PDFDownloadLink,B as PDFViewer,k as StyleSheet,g as createRenderer,j as default,P as pdf,R as render,O as renderToBuffer,I as renderToFile,F as renderToStream,D as renderToString,A as usePDF,x as version};
//# sourceMappingURL=react-pdf.es.min.js.map
